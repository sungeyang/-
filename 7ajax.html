<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<!--<script src="http://github.com/jquery.js"></script>-->
<script src="jquery-2.1.3.min.js"></script>
</head>

<body>
<script>

/*function show(data){
	console.log(data);
}
//show({"name":"hello"});
var oScript = document.createElement('script');
oScript.src = 'jsonp.php';
document.body.appendChild(oScript);*/

/*function getJSON(url,fn){
	var oScript = document.createElement('script');
	var re = /callback=([a-z0-9]+)/;
	var fnName = url.match(re)[1];
	oScript.src = url;
	document.body.appendChild(oScript);
	window[fnName] = fn;
	oScript.onload = function(){
		document.body.removeChild(oScript);
		delete window[fnName];
	};
}*/

function getJSON(url,fn){
	var oScript = document.createElement('script');
	var randomStr = 'miaov' + (Math.random().toString().replace(/\D/g,''));
	
	var re = /callback=\?/;
	url = url.replace(re,'callback='+randomStr);
	//console.log(url);
	oScript.src = url;
	document.body.appendChild(oScript);
	window[randomStr] = fn;
	oScript.onload = function(){
		document.body.removeChild(oScript);
		delete window[randomStr];
	};
}
document.onclick = function(){
	/*getJSON('http://127.0.0.1/ajaxMusic2/20151129/jsonp.php?callback=aaa',function(data){
		console.log(data);
	});*/
	/*$.getJSON('http://127.0.0.1/ajaxMusic2/20151129/jsonp.php?callback=?',function(data){
		console.log(data);
	});*/
	
	getJSON('http://127.0.0.1/ajaxMusic2/20151129/jsonp.php?callback=?',function(data){
		console.log(data);
	});
};

</script>
<!--<script src="jsonp.js"></script>-->
</body>
</html>
